
---
title: "Considerações iniciais sobre o ASP.NET MVC Framework"
date: 2007-12-06T02:14:00+08:00
lastmod: 2009-06-24T01:10:27+08:00
draft: false
categories: []
tags: ["asp.net", "mvc", ]
---


*<span style="FONT-FAMILY: 'Arial','sans-serif'; COLOR: #ff3333; FONT-SIZE: 10pt">Antes de você continuar, gostaria de deixar claro que, enquanto este post é escrito, o acesso ao ASP.NET MVC Framework está restrito a um grupo muito pequeno de pessoas (do qual, infelizmente, não faço parte). Portanto, tudo o que você vai ler aqui é baseado em informações que começam a aparecer na Internet e, portanto, sujeito a correções e/ou alterações. Até por conta disso, não pretendo abordar o lado prático do ASP.NET MVC Framework, ficando isso para uma próxima oportunidade. Abordarei um lado mais conceitual, com minhas impressões sobre o que tenho lido até o momento.</span>*

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">  
**<span style="FONT-FAMILY: 'Arial','sans-serif'">Antes, um pouco de história</span>**</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Ao invés de entrar diretamente no assunto, acho importante contextualizar como o desenvolvimento de aplicações web tem evoluído. Nos primórdios da Web, a única maneira de se ter uma página dinâmica (cujo conteúdo poderia variar de acordo com determinadas circunstâncias), era através do uso de </span>[<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">CGI</span></span>](http://www.w3.org/CGI/ "CGI")<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"> - *<span style="FONT-FAMILY: 'Arial','sans-serif'">Common Gateway Interface</span>*. O CGI nada mais é do que um programa que segue certos padrões para ser executado em um servidor web qualquer, recebendo dados de entrada e gerando um resultado. Os dados de entrada geralmente são passados a partir de campos do formulário de uma página para o servidor web, que por sua vez executa o programa CGI, que irá fazer o processamento necessário e devolver o resultado (geralmente, um arquivo HTML) para o servidor web, que o repassará para o browser. Desenvolver um CGI exige um conhecimento maior sobre o protocolo HTTP e HTML, pois itens como cabeçalhos de resposta da requisição, tratamento dos parâmetros de entrada e o resultado HTML são responsabilidades do CGI. Assim, percebe-se que o desenvolvedor trabalha em um ambiente de mais baixo nível.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">![Representação do funcionamento de uma aplicação CGI](/img/2007/cgi.jpg "Representação do funcionamento de uma aplicação CGI")</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Com o passar do tempo, alguns servidores web ganharam extensões que permitiam ter acesso a mais recursos dos mesmos. Por exemplo, o servidor web da Netscape passou a ter o NSAPI - *<span style="FONT-FAMILY: 'Arial','sans-serif'">Netscape Server Application Programming Interface</span>*, enquanto que o IIS, da Microsoft, ganhou o ISAPI - *<span style="FONT-FAMILY: 'Arial','sans-serif'">Internet Server Application Programming Interface</span>*. O objetivo dessas extensões era o mesmo do CGI, ou seja, permitir a execução de programas no servidor web. Entretanto, há algumas diferenças entre essas duas tecnologias. Enquanto que para cada programa CGI é criado um processo em memória separado do processo do servidor web, aplicações ISAPI rodam no mesmo processo, o que as tornam mais rápidas, já que não há a sobrecarga da comunicação entre os processos. Por outro lado, caso algum *<span style="FONT-FAMILY: 'Arial','sans-serif'">bug</span>* em uma aplicação ISAPI cause um *<span style="FONT-FAMILY: 'Arial','sans-serif'">crash</span>*, o processo do servidor web é afetado (e conseqüentemente, as demais aplicações dele), enquanto que no CGI o problema fica limitado ao processo do mesmo.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">![Representação do funcionamento de uma aplicação ISAPI](/img/2007/isapi.jpg "Representação do funcionamento de uma aplicação ISAPI")</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Desenvolver utilizando essas tecnologias não era tarefa das mais simples, pois exigia conhecimentos sobre como era o funcionamento em um nível mais baixo. Visando melhorar a produtividade e deixar a atenção do desenvolvedor voltada para o que realmente importava (solução de problemas de negócios), começaram a surgir plataformas de desenvolvimento mais amigáveis. A Microsoft lançou o ASP - *<span style="FONT-FAMILY: 'Arial','sans-serif'">Active Server Pages</span>*, através do qual era possível desenvolver aplicações para web através de uma linguagem de *<span style="FONT-FAMILY: 'Arial','sans-serif'">script</span>*, normalmente VBScript. É importante destacar que o ASP é uma extensão ISAPI instalada no servidor web e que fornece um ambiente de execução de aplicações de mais alto nível. Assim, quando o browser requisita uma página ASP, o servidor web redireciona o pedido para a extensão ISAPI do ASP, que interpreta os comandos VBScript e devolve o resultado para o servidor web, que o repassa para o browser. O ASP abstraiu muito da camada de mais baixo nível relativa ao protocolo HTTP, mas ainda assim era necessário ter conhecimentos mais especializados de HTML.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">  
**<span style="FONT-FAMILY: 'Arial','sans-serif'">ASP.NET</span>**</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Com o lançamento da plataforma .NET em 2002, a Microsoft fez alterações importantes na sua infra-estrutura para aplicações web. Assim, o ASP deu lugar ao ASP.NET. O ASP.NET, assim como o ASP, é implementado através de uma extensão ISAPI do IIS. Entretanto, a semelhança entre ambos pára por aqui. Para se desenvolver em ASP.NET, ao invés de se utilizar linguagens de *<span style="FONT-FAMILY: 'Arial','sans-serif'">script</span>*, utilizam-se linguagens mais robustas, como C# e VB.NET, com amplo suporte às classes do .NET Framework. Além disso, o código passa a ser compilado ao invés de interpretado. Também foi introduzido o conceito de *<span style="FONT-FAMILY: 'Arial','sans-serif'">code-behind</span>*, no qual o código do programa fica separado do código HTML da página. Por falar nela, a página não é mais uma simples página HTML, mas sim um *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForm</span>*, com um modelo próprio de execução e orientado a eventos. Outro conceito novo foi o *<span style="FONT-FAMILY: 'Arial','sans-serif'">PostBack</span>*, que fazia com que cada requisição de página fosse feita para ela mesma. Confesso que isso causou certa estranheza em mim, pois até então, os *<span style="FONT-FAMILY: 'Arial','sans-serif'">posts</span>* dos formulários HTML eram feitos para outras páginas. Este modelo de PostBack veio acompanhado de outros novos conceitos, como o </span>[<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">ciclo de vida de uma página</span></span>](http://msdn2.microsoft.com/en-us/library/ms178472.aspx "Ciclo de vida de uma página ASP.NET")<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"> e o *<span style="FONT-FAMILY: 'Arial','sans-serif'">ViewState</span>*. Além disso, o ASP.NET foi capaz de manter os valores dos campos do *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForm</span>* automaticamente a cada *<span style="FONT-FAMILY: 'Arial','sans-serif'">post</span>*. </span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">O modo de se desenvolver aplicações, com o ASP.NET, ficou parecido com o modo de se desenvolver aplicações desktop Windows. Não era mais necessário possuir grandes conhecimentos de HTML e tão pouco do protocolo HTTP. Esse modelo de desenvolvimento permitiu que antigos desenvolvedores de aplicações desktop conseguissem migrar para o mundo web de uma forma mais natural. O fato do ASP.NET abstrair esses aspectos pode ser encarado como um avanço ou um problema. Pode ser um avanço na medida em que você ganha produtividade e deixa de se preocupar com detalhes que não deveriam tomar muito tempo. Mas pode ser um problema no momento em que a pessoa acha que esse modelo é a solução para todos os problemas e não se interessa pelo que ocorre nos bastidores, não entendendo o real funcionamento do processo. Isso fica mais evidente em quem veio do mundo desktop e naqueles que aprenderam a desenvolver aplicações web diretamente com o ASP.NET. Nesses casos, o modelo de desenvolvimento do ASP.NET acaba funcionando como um limitador, pois as pessoas, sem um entendimento mais profundo de como uma aplicação web funciona (independentemente da tecnologia), acabam tendo dificuldades quando precisam utilizar recursos além dos básicos. Um sinal claro disso são as dúvidas freqüentes que aparecem nos fóruns de discussão sobre, por exemplo, o uso de javascript no ASP.NET. Apesar dos avanços que o ASP.NET trouxe, ainda existem operações que somente são possíveis de serem feitas através do uso de javascript, pois envolvem o lado cliente (browser). A falta de entendimento entre o que é executado no servidor e o que é executado no cliente acaba dificultando o desenvolvimento de recursos mais avançados para a aplicação. Assim, apesar do desenvolvedor que utiliza os *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>* do ASP.NET não precisar conhecer muito de HTML e HTTP, não quer dizer que isso pode ser totalmente esquecido e que ele não precisará utilizar esse conhecimento em algum momento.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">  
**<span style="FONT-FAMILY: 'Arial','sans-serif'">MVC</span>**</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Ao mesmo tempo que a Microsoft evoluía sua plataforma de desenvolvimento, começaram a surgir na Internet projetos *<span style="FONT-FAMILY: 'Arial','sans-serif'">open-source</span>* que visavam disponibilizar frameworks para facilitar e agilizar o desenvolvimento de aplicações web. Um dos frameworks que mais ganhou atenção nos últimos tempos foi o </span>[<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">Ruby on Rails</span></span>](http://www.rubyonrails.org/ "Ruby on Rails")<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">, que utiliza o padrão MVC e é escrito na linguagem Ruby. A comunidade .NET também teve sua implementação independente para o padrão MVC, através do </span>[<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">MonoRail</span></span>](http://www.castleproject.org/monorail/ "MonoRail")<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">O MVC - *<span style="FONT-FAMILY: 'Arial','sans-serif'">Model-View-Controller</span>* -  é uma arquitetura que divide uma aplicação em três partes: 1) o *<span style="FONT-FAMILY: 'Arial','sans-serif'">Model</span>*, responsável pela manutenção do estado dos dados (por exemplo, armazenando os dados em um banco de dados); 2) o *<span style="FONT-FAMILY: 'Arial','sans-serif'">View</span>*, responsável pela interface com o usuário (não deve possuir nenhuma lógica de aplicação e nem de acesso a dados); 3) o *<span style="FONT-FAMILY: 'Arial','sans-serif'">Controller</span>*, que controla a lógica da aplicação, manipulando os dados do *<span style="FONT-FAMILY: 'Arial','sans-serif'">Model</span>* e escolhendo o *<span style="FONT-FAMILY: 'Arial','sans-serif'">View</span>* a ser utilizado. Essa arquitetura permite a clara separação dos papéis de cada componente, o que facilita a execução de testes unitários na aplicação, entre outros benefícios.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">  
**<span style="FONT-FAMILY: 'Arial','sans-serif'">ASP.NET MVC Framework</span>**</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Recentemente, a Microsoft </span>[<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">anunciou</span></span>](http://weblogs.asp.net/scottgu/archive/2007/10/14/asp-net-mvc-framework.aspx "ASP.NET MVC Framework")<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"> que está trabalhando em uma implementação da arquitetura MVC para o ASP.NET, chamado de ASP.NET MVC Framework. Você pode estar se perguntando: "Mas o modelo *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForm</span>* do ASP.NET já não separa o código da página HTML através do code-behind?". Apesar do código ficar separado (o que facilita a organização e possibilita que um *<span style="FONT-FAMILY: 'Arial','sans-serif'">designer</span>* trabalhe com a interface gráfica enquanto o desenvolvedor cuida do código), essas duas partes estão um tanto acopladas. É como se o *<span style="FONT-FAMILY: 'Arial','sans-serif'">Controller</span>* (*<span style="FONT-FAMILY: 'Arial','sans-serif'">code-behind</span>*) e o *<span style="FONT-FAMILY: 'Arial','sans-serif'">View</span>* (.ASPX) estivessem unidos. Isso dificulta, por exemplo, os testes unitários de sua aplicação, pois não é possível fazer os mesmos sem a execução da página.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Este novo modelo de desenvolvimento de aplicações ASP.NET traz algumas diferenças em relação ao modelo de *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>* usado até então. A primeira das diferenças é que as requisições de uma aplicação ASP.NET não serão mais feitas a uma página, mas sim a um *<span style="FONT-FAMILY: 'Arial','sans-serif'">Controller</span>*, que nada mais é do que uma classe .NET. Na prática, isso significa que não mais referenciaremos uma página ASPX em uma URL. Por exemplo, uma URL para exibir uma lista de produtos que no padrão *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>* seria assim:</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">http://www.site.com/produtos.aspx</span></span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Utilizando a arquitetura MVC ficará assim:</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">http://www.site.com/produtos</span></span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Isso também serve para os posts executados pelos formulários HTML. Assim, outra grande diferença em relação ao modelo *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>* é que o *<span style="FONT-FAMILY: 'Arial','sans-serif'">PostBack</span>* não mais existirá no MVC Framework. Isso mesmo, nada de fazer *<span style="FONT-FAMILY: 'Arial','sans-serif'">posts</span>* para a mesma página. Se pensarmos bem, veremos que faz todo sentido, já que a responsabilidade de decidir o que fazer com a requisição é do *<span style="FONT-FAMILY: 'Arial','sans-serif'">Controller</span>*, e a página ASPX servirá somente como um *<span style="FONT-FAMILY: 'Arial','sans-serif'">template</span>* para renderizar a resposta. Uma conseqüência da eliminação do *<span style="FONT-FAMILY: 'Arial','sans-serif'">PostBack</span>* será também a eliminação do *<span style="FONT-FAMILY: 'Arial','sans-serif'">Viewstate</span>*, o que para muitos é muito bem-vindo, já que ele deixa a página mais pesada, além de poder causar alguns outros problemas.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Outro aspecto que sofrerá alterações será em relação ao uso do ASP.NET AJAX, mais especificamente o UpdatePanel, pois o mesmo se baseia no controle **<span style="FONT-FAMILY: 'Arial','sans-serif'"><form runat="server"></span>**, que não existirá neste novo modelo. Entretanto, ainda não foi divulgado exatamente como trabalhar com AJAX no *<span style="FONT-FAMILY: 'Arial','sans-serif'">framework</span>* MVC.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Pelo que tenho lido e entendido, o desenvolvedor terá um controle maior sobre o HTML gerado, o que implica em trabalhar em um nível mais próximo do HTML/HTTP do que o exigido no modelo *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>* do ASP.NET. Assim, aqueles que entendem como uma aplicação web funciona e que consideram o modelo de *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>* muito complexo ou sofisticado, provavelmente optarão pelo *<span style="FONT-FAMILY: 'Arial','sans-serif'">framework</span>*. Já aqueles que sabem somente os aspectos básicos do funcionamento dos *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>*, provavelmente terão mais dificuldade ou até mesmo não verão motivos para utilizar o novo modelo.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">  
**<span style="FONT-FAMILY: 'Arial','sans-serif'">Serei obrigado a usar o novo modelo do ASP.NET MVC Framework?</span>**</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Não, o modelo *<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>* do ASP.NET continuará existindo e evoluindo. O ASP.NET MVC Framework será opcional, ou seja, uma alternativa a ser considerada na escolha da melhor arquitetura da sua aplicação, mas não será imposta. Além disso, também será possível utilizar os dois modelos ao mesmo tempo (*<span style="FONT-FAMILY: 'Arial','sans-serif'">WebForms</span>* e MVC) em uma mesma aplicação.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">  
**<span style="FONT-FAMILY: 'Arial','sans-serif'">Com qual versão do .NET Framework e do Visual Studio será possível usar o ASP.NET MVC Framework?</span>**</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Será possível utilizá-lo a partir do .NET Framework 3.5 e Visual Studio 2008, inclusive na versão Express.</span>

<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">  
A previsão é que a primeira versão CTP - *<span style="FONT-FAMILY: 'Arial','sans-serif'">Community Technology Preview</span>* do ASP.NET MVC Framework esteja disponível para download na primeira semana de dezembro. Se você estiver interessado no assunto, sugiro estudar o material de referência abaixo. </span>

**<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Referências</span>**

*   [<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">ASP.NET MVC Framework (Part 1)</span></span>](http://weblogs.asp.net/scottgu/archive/2007/11/13/asp-net-mvc-framework-part-1.aspx "Primeira parte de um tutorial sobre ASP.NET MVC Framework")<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"> - primeira parte de um tutorial sobre ASP.NET MVC Framework</span>
*   <span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">[ASP.NET MVC Framework (Part 2)](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)</span></span><span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">[ - URL Routing](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx) - segunda parte de um tutorial sobre ASP.NET MVC Framework</span></span>
*   [<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">DevConnections and PNPSummit MVC Demos Source Code</span></span>](http://www.hanselman.com/blog/DevConnectionsAndPNPSummitMVCDemosSourceCode.aspx)<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"> - alguns códigos-fontes do ASP.NET MVC Framework para download</span>
*   [<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">Video da primeira apresentação pública do ASP.NET MVC Framework</span></span>](http://www.hanselman.com/silverlight/ScottGuAtAltNetConf/)<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"> (em inglês e precisa do plug-in do Silverlight) </span>
*   [<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">Ajax with the ASP.NET MVC Framework</span></span>](http://www.nikhilk.net/Ajax-MVC.aspx)
*   [<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">What's Ailing ASP.NET Web Forms</span></span>](http://west-wind.com/weblog/posts/198731.aspx)
*   [<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"><span style="color: #0000ff;">Use the ASP.NET MVC Framework to Write Web Apps without Viewstate or Postbacks</span></span>](http://www.code-magazine.com/Article.aspx?quickid=070173)
*   [<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt">Fredrik Normén</span>](http://weblogs.asp.net/fredriknormen/archive/tags/MVC+Framework/default.aspx)<span style="FONT-FAMILY: 'Arial','sans-serif'; FONT-SIZE: 10pt"> - blog com bastante material sobre ASP.NET MVC Framework</span>


